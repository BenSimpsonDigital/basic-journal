# Implementation Plan - Calendar View for Timeline

Add a calendar-based navigation and visualization for journal entries, allowing users to see their mood history at a glance.

## User Review Required

> [!IMPORTANT]
> The calendar will show one mood per day. If a user has multiple entries, we will prioritize the latest mood of that day for the background color.

> [!NOTE]
> We will use a custom-built calendar instead of `DatePicker` to have full control over the mood-based styling and layout, keeping it consistent with the "minimal, premium" aesthetic.

## Proposed Changes

### Core UI Component

#### [NEW] [CalendarView.swift](file:///Users/bensimpson/Documents/Projects/Basic%20Journal/basic-journal/BasicJournal/Remin/Views/CalendarView.swift)
- Implement a custom calendar grid.
- Each date cell will show the mood color as a soft background if an entry exists.
- Tapping a date with an entry will trigger a navigation to `EntryDetailView` or show the entry transcript in a preview below the calendar.
- Support month/year navigation (Prev/Next).

### Timeline Integration

#### [MODIFY] [ScreenHeaderView.swift](file:///Users/bensimpson/Documents/Projects/Basic%20Journal/basic-journal/BasicJournal/Remin/Views/ScreenHeaderView.swift)
- Add an optional `action` parameter to support a trailing icon button in the header.
- This will allow the calendar icon to sit "in-line" with the title as requested.

#### [MODIFY] [TimelineView.swift](file:///Users/bensimpson/Documents/Projects/Basic%20Journal/basic-journal/BasicJournal/Remin/Views/TimelineView.swift)
- Add a `@State` variable `isCalendarView` to toggle between List and Calendar view.
- Pass the toggle action to `ScreenHeaderView`.
- Use a `ZStack` or conditional `if/else` with a smooth transition (e.g., `.opacity` or `.move`) to switch between the existing `ScrollView` and the new `CalendarView`.

### View Model Support

#### [MODIFY] [JournalViewModel.swift](file:///Users/bensimpson/Documents/Projects/Basic%20Journal/basic-journal/BasicJournal/Remin/ViewModels/JournalViewModel.swift)
- Add a helper function to retrieve an entry (or mood) for a specific `Date`.

---

## Verification Plan

### Manual Verification
1. **Toggle Switch**:
    - Open the Timeline tab.
    - Tap the calendar icon in the top right.
    - Verify that the view switches between List and Calendar.
2. **Calendar Visuals**:
    - Verify that days with entries show the correct mood color background.
    - Verify that the current month is displayed correctly.
    - Test navigation between months.
3. **Entry Detail**:
    - Tap a date with an entry.
    - Verify it navigates to the `EntryDetailView`.
4. **Project Playbook Alignment**:
    - Ensure margins, typography, and "atmosphere" (gradients/orbs) match the existing app style.
